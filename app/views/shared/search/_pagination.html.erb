<div class="pagination">
  <strong><%= link_to "PrÃ©cedent", flats_path(pg: [(@current_page - 1), 1].max, sort: "d-surface", price_min: params['price_min'], price_max: params['price_max'], return_min: params['return_min'], return_max: params['return_max'], surface_min: params['surface_min'], surface_max: params['surface_max'], room_1: params['room_1'], room_2: params['room_2'], room_3: params['room_3'], room_4: params['room_4'], room_5: params['room_5']) %></strong>
  <% if (@page_number > 5) && (@current_page <= 3) %>
    <% for i in (1..[@current_page,1].max+1) do %>
      <%= link_to number_with_delimiter(i, :delimiter => ' '), flats_path(pg: i, sort: "d-surface", price_min: params['price_min'], price_max: params['price_max'], return_min: params['return_min'], return_max: params['return_max'], surface_min: params['surface_min'], surface_max: params['surface_max'], room_1: params['room_1'], room_2: params['room_2'], room_3: params['room_3'], room_4: params['room_4'], room_5: params['room_5']), class: "pagination-number #{ 'pagination-active' if (@current_page === i) || (@current_page === 0 && i === 1) }" %>
    <% end %>
    ...
    <% for i in (@page_number-1..@page_number) do %>
      <%= link_to number_with_delimiter(i, :delimiter => ' '), flats_path(pg: i, sort: "d-surface", price_min: params['price_min'], price_max: params['price_max'], return_min: params['return_min'], return_max: params['return_max'], surface_min: params['surface_min'], surface_max: params['surface_max'], room_1: params['room_1'], room_2: params['room_2'], room_3: params['room_3'], room_4: params['room_4'], room_5: params['room_5']), class: "pagination-number #{ 'pagination-active' if (@current_page === i) || (@current_page === 0 && i === 1) }" %>
    <% end %>
  <% elsif (@page_number > 5) && (@current_page >= (@page_number-2)) %>
    <% for i in (1..2) do %>
      <%= link_to number_with_delimiter(i, :delimiter => ' '), flats_path(pg: i, sort: "d-surface", price_min: params['price_min'], price_max: params['price_max'], return_min: params['return_min'], return_max: params['return_max'], surface_min: params['surface_min'], surface_max: params['surface_max'], room_1: params['room_1'], room_2: params['room_2'], room_3: params['room_3'], room_4: params['room_4'], room_5: params['room_5']), class: "pagination-number #{ 'pagination-active' if (@current_page === i) || (@current_page === 0 && i === 1) }" %>
    <% end %>
    ...
    <% for i in ((@current_page-1)..@page_number) do %>
      <%= link_to number_with_delimiter(i, :delimiter => ' '), flats_path(pg: i, sort: "d-surface", price_min: params['price_min'], price_max: params['price_max'], return_min: params['return_min'], return_max: params['return_max'], surface_min: params['surface_min'], surface_max: params['surface_max'], room_1: params['room_1'], room_2: params['room_2'], room_3: params['room_3'], room_4: params['room_4'], room_5: params['room_5']), class: "pagination-number #{ 'pagination-active' if (@current_page === i) || (@current_page === 0 && i === 1) }" %>
    <% end %>
  <% elsif (@page_number > 5) %>
    ...
    <% for i in ((@current_page-2)..(@current_page+2)) do %>
      <%= link_to number_with_delimiter(i, :delimiter => ' '), flats_path(pg: i, sort: "d-surface", price_min: params['price_min'], price_max: params['price_max'], return_min: params['return_min'], return_max: params['return_max'], surface_min: params['surface_min'], surface_max: params['surface_max'], room_1: params['room_1'], room_2: params['room_2'], room_3: params['room_3'], room_4: params['room_4'], room_5: params['room_5']), class: "pagination-number #{ 'pagination-active' if (@current_page === i) || (@current_page === 0 && i === 1) }" %>
    <% end %>
    ...
  <% else %>
    <% for i in (1..@page_number) do %>
      <%= link_to number_with_delimiter(i, :delimiter => ' '), flats_path(pg: i, sort: "d-surface", price_min: params['price_min'], price_max: params['price_max'], return_min: params['return_min'], return_max: params['return_max'], surface_min: params['surface_min'], surface_max: params['surface_max'], room_1: params['room_1'], room_2: params['room_2'], room_3: params['room_3'], room_4: params['room_4'], room_5: params['room_5']), class: "pagination-number #{ 'pagination-active' if (@current_page === i) || (@current_page === 0 && i === 1) }" %>
    <% end %>
  <% end %>
  <strong><%= link_to "Suivant", flats_path(pg: [([@current_page,1].max + 1), @page_number].min) %></strong>
</div>
